<template>
  <div id="jobs_more_info" class="comp_container preview_from_table_container col-7">
      
    <b-button  class="btn btn-danger btn-secondary" id="close_btn" @click="disableMoreInfo()">
      <icon
      name ="window-close">
      </icon>  
    </b-button>

     <transition name="flip" mode="out-in">
      <div v-if="!applied">

        <h2 class="h2s">Details for {{det.username}}</h2>

        <h3 class="h3s">Rating:</h3>
        <p>{{det.rating}} <icon name="star" id="rating_star"></icon></p>

        <!-- slika ovde  -->
        <p>{{det.image}}</p>

        <h3 class="h3s">Jobs done:</h3>

        <div class="port_job portfolio_job_container" v-for="job in det.portfolio" :key="job.id">
          
          <p class="left"><strong>{{job.job}}</strong></p>
          
          <div class="right">
          <p>From: {{pretty_print(job.date1)}}</p>
          <p>To: {{pretty_print(job.date1)}}</p>

          </div>

        </div>


        <b-button  class="btn btn-success btn-secondary" 
          @click="contact()">
            Contact

            <icon
            id="ico"
            name ="check">
            </icon>  
        
        </b-button>

      </div>
     </transition>
    

  </div>

</template>

<script>
import eventBus from "../../../../utils/eventBus";
import Icon from "vue-awesome/components/Icon";
import "vue-awesome/icons/window-close";
import "vue-awesome/icons/check";
import "vue-awesome/icons/star";

export default {
  components: {
    Icon
  },
  mixins: [],
  props: {
    det: {
      type: Object,
      twoWay: true
    }
  },
  computed: {
    errPrice() {
      return this.errors.has(this.priceinput.id);
    },
    errDesc() {
      return this.errors.has(this.descinput.id);
    }
  },
  methods: {
    pretty_print(date) {
      return moment(date).format("DD.MM.YYYY");
    },
    contact() {},
    disableMoreInfo() {
      eventBus.$emit("isVisibleMoreInfo", false);
    }
  },
  mounted() {},
  data() {
    return {
      applied: false,
      descinput: {
        id: "desc",
        label: "description",
        type: "text",
        value: "",
        id_upper: "Description"
      },
      priceinput: {
        id: "price",
        label: "price",
        type: "number",
        value: ""
      }
    };
  }
};
</script>

<style scoped>
#rating_star {
  color: rgba(255, 176, 0, 0.96);
}
.port_job {
  display: flex;
}
.left {
  flex: 0.5;
}
.right {
  display: flex;
  flex-direction: column;
  flex: 0.7;
}

.send_info {
  margin-top: 4%;
}
#ico {
  vertical-align: middle;
}
#close_btn {
  float: right;
}

.has-error {
  border: 1px solid rgba(255, 0, 0, 1);
}

textarea {
  box-shadow: 0px 0px 2px #949494;
  text-align: center;
  outline: none !important;
  border-bottom: 1px solid rgba(0, 8, 53, 0.603);
  background-color: transparent;
  border: 0px;
  width: 100%;
  min-height: 80px;
}
</style>
